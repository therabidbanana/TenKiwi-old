<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>TenKiwi</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script>var pages={"#Home":[{"What's TenKiwi?":"<p>TenKiwi is your very own javascript powered wiki.</p>"},{"What can it do?":"<p>You can create as many pages as you'd like, and fill them with whatever \"content\":[[Formatting]] suits your fancy. All of your changes are saved locally, acting like your very own private wiki that doesn't require any extra software to run. Use it to store notes, links or whatever else might suit your fancy.</p>"}],"#Credits":[{"Who's Responsible?":'<p>TenKiwi was coded by "David Haslem":http://davidhaslem.com.</p>'}],
"#Formatting":[{"Content Formatting":'<p>Content Formatting is easy in **TenKiwi** - `just try editing` _this page_ to see. You can link back to a page, like the [[Home]] page, or to an external site like "Google":http://www.google.com, or link to "a page with special link text":[[Home]].</p>'}],"#kiwi-header":[{TenKiwi:"<nav><ul><li>[[Home]]</li><li>[[Credits]]</li></ul></nav>"}],"#kiwi-footer":[{"All Pages":"%%pagelist%%"}],"#kiwi-settings":[{"Save Url":"","Load Url":""}]};
$(function(){var a=location.hash;$(".q");a=a?a:"#Home";$.each({"Bulleted List":function(){dc.execCommand("InsertUnorderedList",null,false)},"Numbered List":function(){dc.execCommand("InsertOrderedList",null,false)}},function(c,b){$("#b1").append($('<button class="blue">'+c+"</button>").click(b))});$(".container a").live("click",linked);$("article button.red").live("click",remove_s);$("article button.blue").live("click",function(){raw($(this),false)});$(window).bind("hashchange",function(){doload(location.hash)});
doload(a)});var js=JSON.stringify,jp=JSON.parse,ls=localStorage,dc=document,pagelist=["#Home","#Credits","#Formatting"];function linked(){var a=$(this).attr("href");if(a.search(/^http:/)===-1){if($("body").hasClass("go"))confirm("Save changes first?")?edit_off(true):edit_off(false);window.location=a}else{this.target="_blank";return true}}
function raw(a,c){var b;a=a.parent().children("section.q:first");b=a.data("on")?true:false;if(c||b){if(b){b=a.children("textarea").val();a.empty().html(b);b=false}a.attr("contenteditable",true)}else{a.attr("contenteditable",false);b=true;a.html("<textarea>"+a.html()+"</textarea>")}a.data("on",b)}
function magic(a){a=a.replace(/%%pagelist%%/g,"<ul>"+$.map(pagelist,function(c){return"<li>[["+c.substr(1)+"]]</li>"}).join("\n")+"</ul>");return a.replace(/\*\*([^*]+?)\*\*/g,"<strong>$1</strong>").replace(/\b_([^_]+?)_\b/g,"<em>$1</em>").replace(/\[\[([^"]+?)\]\]/g,'<a href="#$1">$1</a>').replace(/`([^`]+?)`/g,"<code>$1</code>").replace(/"([^"]+?)":(https?:\/\/[^\s"<]+)/g,'<a href="$2">$1</a>').replace(/<a href="([^"]+?)([,\.\?])">(.+?)<\/a>/g,'<a href="$1">$3</a>$2').replace(/"([^"]+?)":<a href="([^"]+?)">(.+?)<\/a>/g,
'<a href="$2">$1</a>')}function unmagic(a){a=a.closest(".x");a.html(a.data("unmagic"))}function supermagic(a){a.data("unmagic",a.html());a.html(magic(a.html()));$("a",a).each(function(c,b){b=$(b);if(b.attr("href").match(/^#/))$.inArray(b.attr("href"),pagelist)===-1?b.addClass("broken"):b.removeClass("broken")})}function settings(a){var c="#kiwi-settings",b={};c=ls.getItem(c)?ls.getItem(c):js(pages[c]);$.each(jp(c),function(e,d){$.each(d,function(f,g){b[f]=g})});return a?b[a]:b}
function dosave(a){var c=[],b="#";a=a.closest(".x");b+=a.attr("id");a.children("section").each(function(e,d){c.push("{"+js($(d).children("header").text())+":"+js($(d).children("section").html())+"}")});c="["+c.join(",")+"]";ls.setItem(b,c);settings("Save Url").match(/https?:\/\/(.+?)/)&&$.post(settings("Save Url"),{title:b,content:c},function(){},"json");if($.inArray(b,pagelist)===-1){pagelist.push(b);ls.setItem("pagelist",js(pagelist))}supermagic(a)}
function doload(a){var c=jp(ls.getItem("pagelist"));pagelist=c?c:pagelist;myload("#kiwi-header","header.x");myload(a,"article.x");myload("#kiwi-footer","footer.x")}
function realload(a,c){var b=ls.getItem(a),e="";c=$(c);b=b?jp(b):pages[a]?pages[a]:jp('[{"'+a.substr(1)+'":"<p>This is a new page</p>"}]');c.empty();$.each(b,function(d,f){$.each(f,function(g,h){e+='<section class="clear"><header class="q"><h1>'+g+'</h1></header><section class="q">'+h+"</section></section>"})});c.html(e);supermagic(c);c.attr("id",a.substr(1))}
function myload(a,c){settings("Load Url").match(/https?:\/\/(.+?)/)?$.get(settings("Load Url"),{title:a,b:c},function(b){b.error||ls.setItem(b.title,b.content);realload(b.title,b.b)},"json"):realload(a,c)}function edit_on(){$("body").addClass("go");unmagic($("article"));$("article .q").attr("contenteditable",true);$("article .red,article .blue").remove();$("article header.q").before('<button class="red">Remove</button><button class="blue">Raw</button>')}
function edit_off(a){$("article .blue").each(function(c,b){raw($(b),true)});$("body").removeClass("go");$("article .q").attr("contenteditable",false);$("article .red, article .blue").remove();a?dosave($("article")):doload(location.hash)}function remove_s(){$(this).closest("section").remove();$("article.x").data("unmagic",$("article.x").html())}
function new_s(){$("article.x").append('<section><header class="q"><h1>New</h1></header><section class="q"><p>New content</p></section></section>');$("article.x").data("unmagic",$("article.x").html())};
</script>
<style>body{background:#486805 url("data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAAFUAAABVCAIAAAC3lz8NAAABmUlEQVR4nOXauW0DURRD0WsByqccl+L+K1DuxIEAQdYy+vOXt/CxAeKAKb++f3DJtp19iv/n5NIaBH+5/Dr44+Cx3z8UHmN/NDyW/oB4zPwx8dj4w+Ix8EfGs9ofHM9Sf3w86/wp8CzyZ8Gzwp8Iz3R/Ljxz/enwTPRnxDPLnxTPFH9ePOP+1HgG/dnxjPgF8HT7NfD0+WXwdPiV8Bz1i+E55NfD0+6XxNPoV8XT4hfG89GvjWffL49nx18Bzzt/ETwv/XXwPPtL4XnwV8Nz7y+I5+aviefqL4sHTpXxeP3/HuKF37azv98Rj/v+vnh8/e54HP0R8Hj5g+Bx8cfBY+8PhcfYHw2PpT8gHjN/TDw2/rB4DPyR8az2B8ez1B8fzzp/CjyL/FnwrPAnwjPdnwvPXH86PBP9GfHM8ifFM8WfF8+4PzWeQX92PCN+ATzdfg08fX4ZPB1+JTxH/WJ4Dvn18LT7JfE0+lXxtPiF8Xz0a+PZ98vj2fFXwPPOXwTPS38dPM/+Unge/NXw3PsL4rn5a+K5+svigT+dOP1fptZi2gAAAABJRU5ErkJggg==");font:14px/1.5 'Lucida Grande',Lucida,Verdana,sans-serif;margin:0;padding:0;}a.broken{color:#833;}a.broken:after{content:"?";}.container{width:80%;background:#82B51B;margin:40px auto;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 0 3px #240;-moz-box-shadow:0 0 3px #240;box-shadow:0 0 3px #240;}.container>header{text-align:center;}.container>header h1{font-family:"good-kitty-1","good-kitty-2",cursive;font-size:60px;margin:10px 20px;-webkit-transform:rotate(-3deg);-moz-transform:rotate(-3deg);color:#fff;float:left;text-shadow:0 1px 3px #486805;}.container>article{clear:both;margin-top:10px;background:#fff;padding:20px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px;}h1{margin:.25em 0;font-size:2em;}p,article li{font-size:1.3em;}header nav{float:left;margin-top:40px;}header nav ul{list-style:none;margin:0;padding:0;}header nav li{display:inline-block;margin:0 10px;}header nav li a{color:#fff;font-size:1.5em;text-decoration:none;}header nav li a:hover{border-bottom:4px solid white;}footer a,footer{color:#240;}footer{padding:1em;}.clear:after{clear:both;content:".";display:block;height:0;visibility:hidden;}footer li{width:33%;float:left;}section,article,footer,header{display:block;}#b1,#b2{background:rgba(36,10,5,0.9);#240A05;text-align:left;padding:16px 20px 8px;position:fixed;z-index:20;top:-8px;left:60px;-moz-border-radius:8px;-webkit-border-radius:8px;border-radius:8px;}#b1{display:none;}#b1 div{float:left;margin-right:20px;}.go #b1{display:block;}.go #b2{display:none;}article section header{border-bottom:2px solid #ccc;margin:0 0 10px;}article section button{float:right;margin:7px 5px;}article section section{border:1px dotted transparent;margin:0 0 15px;}.go article section section{border:1px dashed #aaa;}.go article section>header h1{background:#ded;}button{-moz-border-radius:5px;-webkit-border-radius:5px;border-radius:5px;background:#82B51B;color:#fff;padding:5px 9px;font-size:.9em;font-weight:bold;border:0;-moz-box-shadow:0 1px 3px rgba(0,0,0,0.25);-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.25);box-shadow:0 1px 3px rgba(0,0,0,0.25);border-bottom:1px solid rgba(0,0,0,0.25);position:relative;cursor:pointer;text-shadow:0 -1px 1px rgba(0,0,0,0.25);font-weight:bold;display:inline-block;margin:0 .2em;}button:hover{background:#72A50B;}code,textarea{font:13px Monaco,"Courier New",Courier,mono;}textarea{display:block;width:90%;margin:1em auto;min-height:9em;}p code{background:#eef;padding:3px;border:1px solid #dde;color:#222;}button.orange{background:#ff5c00;}button.orange:hover{background:#ef4c00;}button.red{background:#e33100;}button.red:hover{background:#d32100;}button.blue{background:#2daebf;}button.blue:hover{background:#1d9eaf;}</style>
<script type="text/javascript" src="http://use.typekit.com/zxq5eee.js"></script>
<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
</head>
<body>
	<div id="b2"><button onclick="edit_on()">Edit</button></div>
	<div id="b1"><div><button onclick="edit_off(true)">Done editing</button><button class="red" onclick="if(confirm('Are you sure you want to discard your changes?')) edit_off(false)">Discard Changes</button><button class="orange" onclick="new_s();edit_on()">New Section</button></div></div>
	<div class="container tk-calluna">
		<header class="x"></header>
		<article class="x"><h1>Javascript Error</h1><p>If you don't see any content here, there was a Javascript issue. TenKiwi relies on a lot of cutting edge features your browser might not have. Try Chrome 5 or Firefox 3.6.</p></article>
		<footer class="x"></footer>
	</div>
</body>
</html>